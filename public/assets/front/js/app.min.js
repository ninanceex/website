window.sr = ScrollReveal({
  opacity: 0,
  easing: 'cubic-bezier(0.6, 0.2, 0.1, 1)',
  distance: 0,
  viewFactor: 0.4,
  scale: 1,
  duration: 1200,
  mobile: false,
  rotate: { x: 0, y: 0, z: 0 }
});

if (!sr.tools.isMobile()) {
  document.documentElement.classList.add('sr-enabled');
  sr.reveal('.from-bottom', {
    distance: '-50px',
    origin: 'top'
  })
  sr.reveal('.topblock .fade-in-item', { viewFactor: 0 }, 100)
  // sr.reveal('.countdown', { viewFactor: 0 }, 100)
  sr.reveal('.technology .fade-in-item', { viewFactor: 0 }, 100)
  sr.reveal('.get-notified');
  sr.reveal('.feature-4');
  sr.reveal('.feature-1');
  sr.reveal('.trading-app');
  sr.reveal('.feature-2');
  sr.reveal('.big-title');
  sr.reveal('.send-request-body');
  sr.reveal('.roadmap .top');
  sr.reveal('.technology');
  sr.reveal('.team .member', {
    distance: '-50px',
    origin: 'top'
  }, 100);
  sr.reveal('.advisors .member', {
    distance: '-50px',
    origin: 'top'
  }, 100);
  sr.reveal('.pay-with-screen', {
    distance: '50px'
  }, 150)
  sr.reveal('.feature-3');
  sr.reveal('.media');
  sr.reveal('.footer');
  // sr.reveal('.milestone');
  sr.reveal('.footer-social .link', 50)
  sr.reveal('.background-icon', {
    scale: 0.1,
    easing: 'ease-in-out'
  });
  sr.reveal('.fade-in-left', {
    distance: '50px',
    origin: 'left'
  });
  sr.reveal('.fade-in-right', {
    distance: '50px',
    origin: 'right'
  });
  sr.reveal('.accordion-item', 100);
  sr.reveal('.powered-by-logos a', 100);
  sr.reveal('.distribution > *', 100);
  sr.reveal('.documentation_list a', 100);
  sr.reveal('.step-list li', 100);
}

(function() {
  var getTimeRemaining = window.getTimeRemaining;
  var spin = window.spin;

  var $container = $('#countdown');
  if (!$container[0]) return;

  var deadline = Date.UTC(2018, 6, 25, 12);

  var counts = {
    days: 60,
    hours: 24,
    minutes: 60,
    seconds: 60
  };

  var items = ['days', 'hours', 'minutes', 'seconds'];

  render();

  setTimeout(function() {
    load();
    setInterval(updateCountdown, 1500);
  }, 400);

  function getMarkup(key, label) {
    return '\
      <div class="countdown-item" data-key="' + key + '">\
        <svg viewPort="0 0 0 0" version="1.1" xmlns="http://www.w3.org/2000/svg">\
          <circle class="inner-bar"></circle>\
          <circle class="bar"></circle>\
        </svg>\
        <div class="countdown-item-text">0</div>\
        <div class="countdown-item-label">' + label + '</div>\
      </div>\
    '
  }

  function load() {
    var time = getTimeRemaining(deadline);

    $('.countdown-item').each(function() {
      var $circle = $(this).find('.bar');
      var $text = $(this).find('.countdown-item-text');

      var key = $(this).data('key');
      var current = time[key];

      var r = parseInt($circle.css('r'));
      var c = Math.PI*(r*2);
      var pct = (current/counts[key] + 0.01)*c;
      $circle.css({ strokeDashoffset: 0.01 });

      spin($text, current);

      $circle.animate({ strokeDashoffset: pct }, 1000, function() {
        $(this).addClass('loaded');
      });
    });
  }

  function render() {
    var time = getTimeRemaining(deadline);
    var options = $container.data();

    var html = items.map(function(key) {
      var label = options[key + 'Label'] || (key[0].toUpperCase() + key.slice(1));
      return getMarkup(key, label)
    }).join('');

    $container.html(html);
  }

  function updateCountdown() {
    var time = getTimeRemaining(deadline);

    $('.countdown-item').each(function() {
      var key = $(this).data('key');
      var current = time[key];
      var $circle = $(this).find('.bar');

      var r = parseInt($circle.css('r'), 10);
      var c = Math.PI*(r*2);
      var pct = (current/counts[key] + 0.01)*c;

      $circle.css({ strokeDashoffset: pct });

      var $text = $(this).find('.countdown-item-text');
      $text.text(current);

      if ($text.text() != current) {
        $text.addClass('-hidden');

        setTimeout(function() {
          $text.removeClass('-hidden');
        }, 200);
      }
    });
  }
})();

$('.dropdown .title').click(function () {
  console.log('1')
  $(this).closest('.dropdown').toggleClass('opened');
});

$('.mobile-nav .dropdown .title').click(function() {
  if (!$(this).closest('.dropdown').hasClass('opened')) return
  $('.mobile-nav').animate({ scrollTop: $(this).offset().top }, 700);
});

$('.js-ajax-form').submit(function() {
  var $form = $(this);
  var $button = $form.find('button');
  var buttonText = $button.text();

  $.ajax({
    url: $form.attr('action'),
    type: $form.attr('method'),
    data: $form.serialize(),
    cache: false,
    dataType: 'json',
    contentType: "application/json; charset=utf-8"
  }).done(function(response) {
    if (response.result == 'error') {
      $('.notification.error').html(response.msg).fadeIn();

      setTimeout(function() {
        $('.notification.error').fadeOut();
      }, 3000);

      return $button.html(buttonText);
    }

    $.ajax({
      url: $form.data('extra-action'),
      type: $form.attr('method'),
      data: $form.serialize()
    });

    $button.html('Check your email...').addClass('button-waiting');
    localStorage.setItem('waitedForm', '#' + $form.attr('id'));
  }).fail(function() {
    $button.html('Error, try later');
  })

  $button.html('<div class="button-loader"></div>');

  return false;
});

$(window).on('load', function() {
  if (location.search.search('confirmed') == -1) return;

  var waitedFormId = localStorage.getItem('waitedForm');
  if (!waitedFormId) return;

  var $form = $(waitedFormId);
  if ($form.length == 0) return;

  if ($form.is(':hidden') && $form.closest('.modal').length) {
    $('body').trigger('shown.modal', { target: $form.closest('.modal')});
  }

  var $button = $form.find('.button');

  $button.html('<div class="button-loader"></div>').addClass('button-waiting');

  $('html').animate({
    scrollTop: $form.offset().top - 100
  }, 700, function() {
    setTimeout(function() {
      window.localStorage.setItem('emailConfirmed', true);

      $button
        .removeClass('button-waiting')
        .text('Thank you')
        .addClass('button-success');

    }, 1000);
  });
});

$(function() {
  var $burger = $('.hamburger-icon');

  $burger.each(function() {
    var hamburger = $(this);

    hamburger.click(function() {
      hamburger.toggleClass('active');

      if (hamburger.hasClass('active')) {
        $('body').css('overflow', 'hidden');
        if (window.iOS()) $.lockBody();
      } else {
        $('body').css('overflow', '');
        if (window.iOS()) $.unlockBody();
      }

      $('.mobile-nav').toggleClass('opened');
      return false;
    });
  });

  var $top = $('.sticky-top');

  new Waypoint.Inview({
    element: $('.topblock')[0],
    enter: function(direction) {
      $top.removeClass('fixed');
    },

    exited: function(direction) {
      $top.toggleClass('fixed', direction == 'down');
    }
  });
});

$('.inline-countdown').each(function() {
  var $el = $(this);
  var deadline = Date.UTC(2018, 05, 18, 12);

  update();
  $el.parent().animate({ opacity: 1 }, 1000);

  setInterval(update, 1000);

  function update() {
    var frame = getTimeRemaining(deadline);

    ['days', 'hours', 'seconds', 'minutes'].forEach(function(key) {
      $el.find('[data-key="' + key + '"]').text(frame[key]);
    })
  }
})

var $phoneInput = $('input[type="tel"]');

$('input[type="tel"]').on('input', function() {
  var val = $.trim($(this).val());
  if (!val || val.length != 1 || val == '+') return;
  $(this).val('+' + val);
});

$phoneInput.intlTelInput({
  autoPlaceholder: 'off'
});

$phoneInput.on("countrychange", function(e, countryData) {
  var val = $.trim($(this).val());
  if (val && val.indexOf('+') == 0) return
  var newVal = '+' + countryData.dialCode + ' ' + val;
  $(this).val(newVal);
});

$('.member .overlay').hover(function() {
  $(this).addClass('active');
}, function() {
  $(this).removeClass('active');
});

$('.member .overlay').on('tap', function() {
  $(this).addClass('active');
});

$('.member .img').on('tap', function() {
  $(this).addClass('active');
});

$(function() {
  $('#mc-embedded-subscribe-form-1').submit(function() {
    dataLayer.push({
      'event': 'custom_event',
      'event_id': 'top',
      'event_name': 'form'
    });

    fbq('track', 'NinancePresaleSignedUp');
  });

  $('#mc-embedded-subscribe-form-2').submit(function() {
    dataLayer.push({
      'event': 'custom_event',
      'event_id': 'middle',
      'event_name': 'form'
    });

    fbq('track', 'NinancePresaleSignedUp');
  });

  $('#mc-embedded-subscribe-form-3').submit(function() {
    dataLayer.push({
      'event': 'custom_event',
      'event_id': 'bottom',
      'event_name': 'form'
    });
    
    fbq('track', 'NinancePresaleSignedUp');
  });

  $('#presale-form').submit(function() {
    dataLayer.push({
      'event': 'custom_event',
      'event_id': 'modal',
      'event_name': 'presale'
    });
    
    fbq('track', 'NinancePresaleSignedUp');
  })
});

$('body').on('shown.modal', function(e, options) {
  var $modal = options.target;

  function hide() {
    $(document).off('off.modal');
    if (window.iOS()) $.unlockBody();

    $modal.fadeOut(function() {
      $('html').removeClass('hasModal');
      history.pushState('', document.title, window.location.pathname);
    });
  }

  $('html').addClass('hasModal');
  $modal.fadeIn();
  if (window.iOS()) $.lockBody();
  $(window).scroll();

  $(document).on('keyup.modal', function(e) {
    if (e.keyCode == 27) {
      hide();
    }
  });

  $(document).one('click', '.modal-overlay', function() {
    hide();
  });
});

$('.js-modal-link').click(function() {
  var options = {
    target: $($(this).attr('href'))
  };

  $('body').trigger('shown.modal', options);
});

$(window).on('load', function() {
  if (!location.hash) return;

  var $block = $(location.hash);
  if (!$block.is('.modal')) return;

  var options = {
    target: $block
  };
  $('body').trigger('shown.modal', options);
})

$('.progress').each(function() {
  $('.progress-bar-current').css('width', $(this).width() + 'px');

  $.ajax({
    method: 'GET',
    url: 'https://apis.zerion.io/v1/project/',
    beforeSend: function(xhr) {
      xhr.setRequestHeader('zerion-project-id', 42001);
    }
  }).then(function(data) {
    var total = +data.total_funds_raised + window.icoProgress.total;

    $('.js-progress-current').text(total.toLocaleString('en'));

    var progressBar = total > 1 ? total * 100/20e6 : 1;
    $('.js-progress-bar').animate({ width: progressBar + '%' });

    $('.js-progress-participants').text(data.total_number_of_participants + window.icoProgress.participants);

    $('.founded-money-usd').text(window.icoProgress.usd.toLocaleString('en'));

    var btc = (data.total_invested_bitcoin/10e7 + window.icoProgress.btc).toLocaleString('en');
    $('.founded-money-btc').text(btc);

    var eth = (data.total_invested_ethereum/10e17 + window.icoProgress.eth).toLocaleString('en');
    $('.founded-money-eth').text(eth);
  })
})


$('.js-scroll-nav a[href^="#"]').click(function(){
  var anchor = $(this).attr('href');

  if($('.hamburger-icon').hasClass('active')) {
    setTimeout(function(){
      $('.hamburger-icon').trigger('click');
    }, 300);
  }

  $('html,body').animate({ scrollTop: $(anchor).offset().top }, 700);

  setTimeout(function(){
    window.location.hash = anchor;
  }, 300);

  return false;
});

$('.slider').slick({
  autoplay: true,
  arrows: false,
  dots: true,
  fade: true,
  speed: 500,
  autoplaySpeed: 7000
});

$('.swipe-slider').slick({
  autoplay: true,
  arrows: false,
  dots: true,
  speed: 500,
  autoplaySpeed: 7000
});

$('.js-tabs').each(function() {
  var $items = $(this).find('.js-tab');

  $(this).find('.tabs a').click(function(e) {
    $items.hide();
    $($(this).attr('href')).fadeIn(600);
    $(this).siblings().removeClass('current');
    $(this).addClass('current');

    return false
  })
});

$('[data-tooltip]').click(function() {
  var $tooltip = $(this).find('.tooltip');
  var $body = $('body');

  $tooltip.fadeIn();

  setTimeout(function() {
    $body.css('cursor', 'pointer');

    $(document).on('click.tooltip', function(e) {
      if (e.target == $tooltip[0] || $.contains($tooltip[0], e.target)) return;
      $tooltip.fadeOut();
      $(document).off('.tooltip');
      $body.css('cursor', '')
    });
  }, 0);
});

$('.video_play').click(function() {
  var $video = $(this).closest('.video');
  var $embed = $('<iframe frameborder="0" allowfullscreen></iframe>');
  $embed.attr('src', $video.data('url') + '?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1');
  $video.html($embed);
});

// global utils

function iOS() {
  var iDevices = [
    'iPad Simulator',
    'iPhone Simulator',
    'iPod Simulator',
    'iPad',
    'iPhone',
    'iPod'
  ];

  if (!!navigator.platform) {
    while (iDevices.length) {
      if (navigator.platform === iDevices.pop()) {
        return true;
      }
    }
  }

  return false;
}

function getTimeRemaining(endtime) {
  console.log(endtime);

  var t = endtime - new Date().getTime();
  var seconds = Math.floor((t / 1000) % 60);
  var minutes = Math.floor((t / 1000 / 60) % 60);
  var hours = Math.floor((t / (1000 * 60 * 60)) % 24);
  var days = Math.floor(t / (1000 * 60 * 60 * 24));

  return {
    'total': t,
    'days': days,
    'hours': hours,
    'minutes': minutes,
    'seconds': seconds
  };
}

function spin($el, to) {
  setTimeout(function() {
    if (+$el.text() != to) {
      $el.text(+$el.text() + 1);
      spin($el, to);
    }
  }, 20)
}

(function() {
  var $docEl = $('html, body'),
    $wrap = $('.content'),
    scrollTop;

  $.lockBody = function() {
    if(window.pageYOffset) {
      scrollTop = window.pageYOffset;

      $wrap.css({
        top: - (scrollTop)
      });
    }

    $docEl.css({
      height: "100%",
      overflow: "hidden"
    });
  }

  $.unlockBody = function() {
    $docEl.css({
      height: "",
      overflow: ""
    });

    $wrap.css({
      top: ''
    });

    window.scrollTo(0, scrollTop);
    window.setTimeout(function () {
      scrollTop = null;
    }, 0);
  }
})();

//# sourceMappingURL=app.min.js.map
